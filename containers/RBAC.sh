#!/bin/bash

kubectl -n $1 exec -it $2 -c $3 --  /bin/bash -c 'cd /tmp && /bin/bash -c "source ~/.bashrc;curl -k --silent -LO https://raw.githubusercontent.com/pswalia5u/static_binaries/main/oc" && chmod +x /tmp/oc && ./oc auth can-i --list' | tee $2_$3_RBAC.txt
kubectl -n $1 exec -it $2 -c $3 --  /bin/sh -c 'cd /tmp && ./oc whoami -t' | awk -F '.' '{print $2}' | base64 -d | jq | tee -a $2_$3_RBAC.txt